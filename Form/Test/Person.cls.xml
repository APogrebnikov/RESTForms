<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="Form.Test.Person">
<Description>
Test form: Person</Description>
<Super>%Persistent,Form.Adaptor,%Populate</Super>
<TimeCreated>64101,38189.100761</TimeCreated>

<Parameter name="FORMNAME">
<Default>Тестовая форма: человек</Default>
</Parameter>

<Parameter name="OBJPERMISSIONS">
<Type>%String</Type>
<Default>CRUD</Default>
</Parameter>

<Parameter name="DISPLAYPROPERTY">
<Description>
Name is a field used as a basic info about this form object</Description>
<Type>%String</Type>
<Default>name</Default>
</Parameter>

<Property name="name">
<Description>
Person's name.
Use only first 250 symbols for comparison.
Required for all long properties used by "order by" </Description>
<Type>%String</Type>
<Parameter name="COLLATION" value="TRUNCATE(250)"/>
<Parameter name="DISPLAYNAME" value="Имя"/>
<Parameter name="MAXLEN" value="2000"/>
</Property>

<Property name="gender">
<Description>
Person's gender</Description>
<Type>%String</Type>
<Parameter name="DISPLAYLIST" value=",М,Ж"/>
<Parameter name="DISPLAYNAME" value="Пол"/>
<Parameter name="VALUELIST" value=",1,2"/>
</Property>

<Property name="dob">
<Description>
Person's Date of Birth.</Description>
<Type>%Date</Type>
<Parameter name="DISPLAYNAME" value="Дата рождения"/>
<Parameter name="POPSPEC" value="Date()"/>
</Property>

<Property name="аge">
<Description><![CDATA[
Person's age.<br>
This is a calculated field whose value is derived from <property>DOB</property>.]]></Description>
<Type>%Integer</Type>
<Calculated>1</Calculated>
<SqlComputeCode> set {*}=##class(Form.Test.Person).currentAge({dob})</SqlComputeCode>
<SqlComputed>1</SqlComputed>
<SqlComputeOnChange>dob</SqlComputeOnChange>
<Parameter name="DISPLAYNAME" value="Возраст"/>
</Property>

<Method name="currentAge">
<Description><![CDATA[
This class method calculates a current age given a date of birth <var>date</var>.]]></Description>
<ClassMethod>1</ClassMethod>
<CodeMode>expression</CodeMode>
<FormalSpec>date:%Date=""</FormalSpec>
<ReturnType>%Integer</ReturnType>
<Implementation><![CDATA[$Select(date="":"",1:($ZD($H,8)-$ZD(date,8)\10000))
]]></Implementation>
</Method>

<Property name="company">
<Description>
The company this person works for.</Description>
<Type>Form.Test.Company</Type>
<Cardinality>one</Cardinality>
<Inverse>employees</Inverse>
<Relationship>1</Relationship>
<Parameter name="DISPLAYNAME" value="Компания"/>
</Property>

<Property name="relative">
<Description>
Person's spouse. 
This is a reference to another persistent object.</Description>
<Type>Form.Test.Person</Type>
<Parameter name="DISPLAYNAME" value="Родственник"/>
</Property>

<Property name="Home">
<Description>
Person's home address. This uses an embedded object.</Description>
<Type>Form.Test.Address</Type>
<Parameter name="DISPLAYNAME" value="Дом"/>
</Property>

<Storage name="Default">
<Type>%Library.CacheStorage</Type>
<DataLocation>^Form.Test.PersonD</DataLocation>
<DefaultData>PersonDefaultData</DefaultData>
<IdLocation>^Form.Test.PersonD</IdLocation>
<IndexLocation>^Form.Test.PersonI</IndexLocation>
<StreamLocation>^Form.Test.PersonS</StreamLocation>
<Data name="PersonDefaultData">
<Value name="1">
<Value>%%CLASSNAME</Value>
</Value>
<Value name="2">
<Value>name</Value>
</Value>
<Value name="3">
<Value>gender</Value>
</Value>
<Value name="4">
<Value>dob</Value>
</Value>
<Value name="5">
<Value>company</Value>
</Value>
<Value name="6">
<Value>spouse</Value>
</Value>
<Value name="7">
<Value>Home</Value>
</Value>
<Value name="8">
<Value>relative</Value>
</Value>
</Data>
</Storage>
</Class>
</Export>
